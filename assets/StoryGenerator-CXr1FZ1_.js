import{r as c,j as a,b as h}from"./index-BsN8wKcX.js";const x="https://nicole-story-api.nicole-story-api.workers.dev/",u=[(t,e,s)=>`One day, ${t} went to the ${e} to find a mysterious ${s}. Suddenly, the ${s} started dancing! Everyone at the ${e} was shocked.`,(t,e,s)=>`${t} was the bravest hero in the ${e}. But ${t}'s only weakness was a giant ${s}.`,(t,e,s)=>`"Don't touch the ${s}!" shouted ${t}. But it was too late. The ${e} was already filled with glitter.`,(t,e,s)=>`Chef ${t} decided to bake a cake shaped like a ${s}. It tasted like ${e}!`,(t,e,s)=>`It was a dark and stormy night at the ${e}. ${t} tripped over a ${s} and found a secret door.`,(t,e,s)=>`Teacher Nicole asked ${t} to bring a ${s} to class. ${t} brought it to the ${e} instead!`,(t,e,s)=>`The ${s} at the ${e} is magical. If ${t} touches it, it turns into gold.`,(t,e,s)=>`Every time ${t} visits the ${e}, a wild ${s} appears and sings a song.`],f=({currentText:t})=>{const[e,s]=c.useState({name:"",place:"",object:""}),[p,o]=c.useState(""),[m,b]=c.useState(!1),y=async()=>{const{name:r,place:d,object:i}=e;if(!(!r||!d||!i)){b(!0),o("");try{const l=await fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,place:d,object:i})});if(!l.ok)throw new Error("API error");const n=await l.json();o(n.story),h(n.source||"ai")}catch(l){console.warn("Story API unavailable, using fallback:",l.message);const n=u[Math.floor(Math.random()*u.length)];o(n(r,d,i)),h("template")}finally{b(!1)}}};return m?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mb-6"}),a.jsx("p",{className:"text-gray-600 font-medium text-lg",children:"AI is writing your story..."}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Powered by Google Gemini ✨"})]}):p?a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-500 mb-4 uppercase",children:t.story.result}),a.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 p-6 rounded-2xl mb-6 shadow-sm",children:a.jsxs("p",{className:"text-xl md:text-2xl font-serif text-gray-800 leading-relaxed",children:["“",p,"”"]})}),a.jsx("div",{className:"bg-sky-50 p-4 rounded-xl mb-6",children:a.jsx("p",{className:"text-sm text-sky-800 italic",children:t.story.tip})}),a.jsx("button",{onClick:()=>{o(""),s({name:"",place:"",object:""})},className:"text-purple-600 font-bold hover:text-purple-800",children:"Create Another Story"})]}):a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-800 text-center",children:t.story.title}),a.jsx("p",{className:"text-gray-500 text-center mb-8",children:t.story.desc}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:t.story.label1}),a.jsx("input",{type:"text",className:"w-full border-2 border-gray-200 rounded-lg p-3 focus:border-purple-500 focus:outline-none",value:e.name,onChange:r=>s({...e,name:r.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:t.story.label2}),a.jsx("input",{type:"text",className:"w-full border-2 border-gray-200 rounded-lg p-3 focus:border-purple-500 focus:outline-none",value:e.place,onChange:r=>s({...e,place:r.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:t.story.label3}),a.jsx("input",{type:"text",className:"w-full border-2 border-gray-200 rounded-lg p-3 focus:border-purple-500 focus:outline-none",value:e.object,onChange:r=>s({...e,object:r.target.value})})]}),a.jsx("button",{onClick:y,disabled:!e.name||!e.place||!e.object,className:"w-full bg-purple-600 text-white font-bold py-3 rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed mt-4",children:t.story.btn})]})]})};export{f as default};
