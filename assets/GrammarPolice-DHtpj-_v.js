import{r as o,j as e,S as M,P as G,B as L,T as Y,X as _,d as B,t as H,a as D}from"./index-BsN8wKcX.js";import{A as F,R as J}from"./refresh-cw-gIKM61_G.js";const W={primary:[{sentence:["She","don't","like","apples."],errorIndex:1,correction:"doesn't"},{sentence:["The","childs","are","playing."],errorIndex:1,correction:"children"},{sentence:["He","goed","to","school."],errorIndex:1,correction:"went"},{sentence:["I","has","a","new","bag."],errorIndex:1,correction:"have"},{sentence:["They","is","my","best","friends."],errorIndex:1,correction:"are"},{sentence:["We","was","happy","yesterday."],errorIndex:1,correction:"were"},{sentence:["Her","runned","to","the","park."],errorIndex:0,correction:"She"},{sentence:["The","dog","catched","the","ball."],errorIndex:2,correction:"caught"}],secondary:[{sentence:["Their","going","to","the","cinema."],errorIndex:0,correction:"They're"},{sentence:["She","should","of","studied","harder."],errorIndex:2,correction:"have"},{sentence:["Everyone","brought","their","own","lunch."],errorIndex:2,correction:"his or her"},{sentence:["Me","and","my","friend","went","shopping."],errorIndex:0,correction:"My friend and I"},{sentence:["The","affect","of","the","rain","was","severe."],errorIndex:1,correction:"effect"},{sentence:["He","did","good","on","the","test."],errorIndex:2,correction:"well"},{sentence:["I","could","care","less","about","it."],errorIndex:1,correction:"couldn't"},{sentence:["Your","the","best","student","here."],errorIndex:0,correction:"You're"}],adult:[{sentence:["Irregardless","of","the","outcome,","we","proceed."],errorIndex:0,correction:"Regardless"},{sentence:["The","data","shows","a","clear","trend."],errorIndex:2,correction:"show"},{sentence:["Please","revert","back","to","me","soon."],errorIndex:2,correction:"(remove 'back')"},{sentence:["I","would","like","to","farther","discuss","this."],errorIndex:4,correction:"further"},{sentence:["Between","you","and","I,","this","is","wrong."],errorIndex:3,correction:"me,"},{sentence:["The","principle","reason","is","cost."],errorIndex:1,correction:"principal"},{sentence:["She","literally","died","of","embarrassment."],errorIndex:1,correction:"figuratively"},{sentence:["Less","people","attended","this","year."],errorIndex:0,correction:"Fewer"}]},d=5,k=2,K=({lang:j,whatsAppLink:T})=>{const[C,w]=o.useState(null),[i,v]=o.useState(0),[x,p]=o.useState(0),[R,g]=o.useState(!1),[b,f]=o.useState(0),[t,c]=o.useState(null),[z,m]=o.useState(null),[N,A]=o.useState([]),P=o.useCallback(r=>{const s=[...W[r]],n=[];for(let h=0;h<d;h++){const l=Math.floor(Math.random()*s.length);n.push(s.splice(l,1)[0])}return n},[]),y=r=>{const s=P(r);w(r),A(s),v(0),p(0),g(!1),f(0),c(null),m(null),H("grammar_police",r)},I=()=>{const r=i+1;r>=d?(g(!0),D("grammar_police",x,d)):(v(r),f(0),c(null),m(null))},E=r=>{if(t==="correct"||t==="revealed")return;if(m(r),r===N[i].errorIndex)p(n=>n+1),c("correct"),setTimeout(()=>I(),2e3);else{const n=b+1;f(n),n>=k?(c("revealed"),setTimeout(()=>I(),2500)):(c("wrong"),setTimeout(()=>{c(null),m(null)},800))}},S=()=>{w(null),p(0),g(!1)};if(!C)return e.jsxs("div",{className:"w-full animate-fadeIn",children:[e.jsx("h3",{className:"text-2xl font-bold mb-8 text-gray-800",children:j==="zh"?"选择你的级别":j==="ms"?"Pilih Tahap Anda":"Select Your Level"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("button",{onClick:()=>y("primary"),className:"group p-6 rounded-2xl border-2 border-yellow-200 hover:border-yellow-400 hover:bg-yellow-50 transition flex flex-col items-center",children:[e.jsx("div",{className:"bg-yellow-100 p-4 rounded-full mb-4 group-hover:scale-110 transition",children:e.jsx(M,{size:32,className:"text-yellow-600"})}),e.jsx("span",{className:"font-bold text-lg",children:"Primary"})]}),e.jsxs("button",{onClick:()=>y("secondary"),className:"group p-6 rounded-2xl border-2 border-sky-200 hover:border-sky-400 hover:bg-sky-50 transition flex flex-col items-center",children:[e.jsx("div",{className:"bg-sky-100 p-4 rounded-full mb-4 group-hover:scale-110 transition",children:e.jsx(G,{size:32,className:"text-sky-600"})}),e.jsx("span",{className:"font-bold text-lg",children:"Secondary"})]}),e.jsxs("button",{onClick:()=>y("adult"),className:"group p-6 rounded-2xl border-2 border-purple-200 hover:border-purple-400 hover:bg-purple-50 transition flex flex-col items-center",children:[e.jsx("div",{className:"bg-purple-100 p-4 rounded-full mb-4 group-hover:scale-110 transition",children:e.jsx(L,{size:32,className:"text-purple-600"})}),e.jsx("span",{className:"font-bold text-lg",children:"Adult"})]})]})]});if(R)return e.jsxs("div",{className:"animate-fadeIn w-full max-w-lg",children:[e.jsx(Y,{size:64,className:"text-yellow-500 mx-auto mb-4 animate-bounce"}),e.jsx("h3",{className:"text-3xl font-bold mb-2",children:x>=4?"Grammar Expert!":x>=3?"Great Job!":"Keep Learning!"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["You scored ",e.jsxs("span",{className:"font-bold text-indigo-600 text-xl",children:[x,"/",d]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs("a",{href:T,target:"_blank",rel:"noreferrer",className:"bg-indigo-600 text-white px-8 py-3 rounded-full font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2",children:["Join a Class ",e.jsx(F,{size:18})]}),e.jsxs("button",{onClick:S,className:"text-gray-500 hover:text-gray-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(J,{size:18})," Play Again"]})]})]});const a=N[i];return e.jsxs("div",{className:"w-full max-w-lg animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("span",{className:"text-sm font-bold text-gray-400 uppercase tracking-wide",children:["Round ",i+1,"/",d]}),e.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{size:20})})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center mb-4",children:[e.jsx(B,{size:20,className:"text-red-500"}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Tap the word with the grammar error!"})]}),b>0&&t==="wrong"&&e.jsxs("p",{className:"text-orange-500 text-sm mb-3 text-center font-medium",children:["Not that one! Try again (",k-b," attempt left)"]}),e.jsx("div",{className:"bg-gray-50 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:a.sentence.map((r,s)=>{const n=s===a.errorIndex,h=z===s,l=t==="correct"||t==="revealed";let u="px-4 py-2.5 rounded-lg font-semibold text-base transition cursor-pointer ";return l&&n?u+=t==="correct"?"bg-green-200 text-green-800 border-2 border-green-500":"bg-red-200 text-red-800 border-2 border-red-500":h&&t==="wrong"?u+="bg-red-100 text-red-600 border-2 border-red-300 animate-pulse":u+="bg-white border-2 border-gray-200 text-gray-800 hover:border-red-400 hover:bg-red-50",e.jsx("button",{onClick:()=>E(s),className:u,disabled:l,children:l&&n?e.jsx("span",{className:"line-through",children:r}):r},s)})})}),(t==="correct"||t==="revealed")&&e.jsx("div",{className:`text-center p-3 rounded-xl ${t==="correct"?"bg-green-50":"bg-red-50"}`,children:e.jsxs("p",{className:`text-sm font-medium ${t==="correct"?"text-green-700":"text-red-700"}`,children:[t==="correct"?"Correct! ":"The error was: ",e.jsxs("strong",{children:["“",a.sentence[a.errorIndex],"”"]})," should be ",e.jsxs("strong",{children:["“",a.correction,"”"]})]})})]})};export{K as default};
